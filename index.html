<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
	<title>VForm Demo</title>
	<link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.7/theme-chalk/index.min.css">
  <link rel="stylesheet" href="https://unpkg.com/vant@2.12/lib/index.css" />
	<link rel="stylesheet" href="https://ks3-cn-beijing.ksyun.com/vform2022/VmFormRender.css?t=20210720">  
	<style type="text/css">
	</style>
</head>
<body>

  <div id="app">
	  <vm-form-render :form-json="formJson" :form-data="formData" :option-data="optionData" ref="vmFormRef">
    </vm-form-render>
	  <!-- <el-button type="primary" @click="submitForm">Submit</el-button> -->
    <van-button block round type="primary" @click="Save">保存Save</van-button>
    <van-button block round type="danger"  @click="Clear">清除Clear</van-button>
  </div>

<script type="text/javascript">
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //IE load polyfill.js for Promise
    var scriptEle = document.createElement("script");
    scriptEle.type = "text/javascript";
    scriptEle.src = "https://cdn.bootcss.com/babel-polyfill/6.23.0/polyfill.min.js"
    document.body.appendChild(scriptEle)
  }
</script>
<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/vue/2.6.14/vue.min.js"></script>
<script src="https://cdn.staticfile.org/element-ui/2.15.7/index.min.js"></script>
<script src="https://unpkg.com/vant@2.12/lib/vant.min.js"></script>
<script src="./dist/UI.js"></script>
<script src="./dist/VmFormRender.umd.min.js"></script>
<script>
	new Vue({
      el: '#app',
      data: {
        formJson: ui1,
        formData: localStorage.getItem("UI")?JSON.parse(localStorage.getItem("UI")):{},
        optionData: {}
      },
      methods: {
        Save() {
          this.$refs.vmFormRef.getFormData().then( (formData) => {
            // Form Validation OK
            const dataS=JSON.stringify(formData)
            localStorage.setItem("UI",dataS)
            console.log(dataS)
            // window.bridge.toast("保存成功\n"+dataS,16)
          }).catch( function(error) {
            // Form Validation Failed
            error(error)
          })
        },
        Clear(){
          this.$refs.vmFormRef.resetForm()
          localStorage.clear()
          // 关闭界面()
        }
      }
	});
  function 关闭界面() {
		window.bridge.callLua("关闭界面()");
	}
</script>
</body>
</html>
